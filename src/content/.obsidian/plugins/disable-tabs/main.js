/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DisableTabsPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  enabled: true,
  hideMobileNewTabIcon: false
};

// src/utils/tab-enforcer.ts
var TabEnforcer = class {
  constructor(app) {
    this.app = app;
  }
  enforceSingleTab() {
    const leaves = [];
    this.app.workspace.iterateRootLeaves((leaf) => {
      leaves.push(leaf);
    });
    if (leaves.length > 1) {
      let active = leaves[leaves.length - 1];
      for (const leaf of leaves) {
        const view = leaf.view;
        if (view && "containerEl" in view) {
          const containerEl = view.containerEl;
          if (containerEl && containerEl.hasClass("is-active")) {
            active = leaf;
            break;
          }
        }
      }
      leaves.forEach((leaf) => {
        if (leaf !== active) {
          leaf.detach();
        }
      });
    }
  }
};

// src/ui/settings-tab.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"));
function createSettingsGroup(containerEl, heading) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/ui/settings-tab.ts
var DisableTabsSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
    this.settings = plugin.settings;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const generalGroup = createSettingsGroup(containerEl);
    generalGroup.addSetting((setting) => {
      setting.setName("Hide mobile tabs icon").setDesc("Hide the tabs icon on mobile devices").addToggle(
        (toggle) => toggle.setValue(this.settings.hideMobileNewTabIcon).onChange(async (value) => {
          this.settings.hideMobileNewTabIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileTabIconCSS();
        })
      );
    });
  }
};

// src/main.ts
var DisableTabsPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    const loadedData = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    this.tabEnforcer = new TabEnforcer(this.app);
    this.updateMobileTabIconCSS();
    this.registerEvent(this.app.workspace.on("layout-change", () => {
      this.tabEnforcer.enforceSingleTab();
    }));
    this.app.workspace.onLayoutReady(() => {
      this.tabEnforcer.enforceSingleTab();
    });
    this.addSettingTab(new DisableTabsSettingTab(this.app, this));
  }
  updateMobileTabIconCSS() {
    if (this.settings.hideMobileNewTabIcon) {
      document.body.classList.add("disable-tabs-hide-mobile-icon");
    } else {
      document.body.classList.remove("disable-tabs-hide-mobile-icon");
    }
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
    document.body.classList.remove("disable-tabs-hide-mobile-icon");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlscy90YWItZW5mb3JjZXIudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERpc2FibGVUYWJzU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgVGFiRW5mb3JjZXIgfSBmcm9tIFwiLi91dGlscy90YWItZW5mb3JjZXJcIjtcbmltcG9ydCB7IERpc2FibGVUYWJzU2V0dGluZ1RhYiB9IGZyb20gXCIuL3VpL3NldHRpbmdzLXRhYlwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNhYmxlVGFic1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzITogRGlzYWJsZVRhYnNTZXR0aW5ncztcbiAgcHJpdmF0ZSB0YWJFbmZvcmNlciE6IFRhYkVuZm9yY2VyO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAvLyBMb2FkIHNldHRpbmdzXG4gICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKSBhcyBQYXJ0aWFsPERpc2FibGVUYWJzU2V0dGluZ3M+IHwgbnVsbDtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZSB0YWIgZW5mb3JjZXJcbiAgICB0aGlzLnRhYkVuZm9yY2VyID0gbmV3IFRhYkVuZm9yY2VyKHRoaXMuYXBwKTtcblxuICAgIC8vIEFwcGx5IG1vYmlsZSB0YWIgaWNvbiBDU1MgaWYgZW5hYmxlZFxuICAgIHRoaXMudXBkYXRlTW9iaWxlVGFiSWNvbkNTUygpO1xuXG4gICAgLy8gSG9vayBpbnRvIHRoZSB3b3Jrc3BhY2UgdG8gZW5mb3JjZSBzaW5nbGUgdGFiIG9uIGxheW91dCBjaGFuZ2VzXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgdGhpcy50YWJFbmZvcmNlci5lbmZvcmNlU2luZ2xlVGFiKCk7XG4gICAgfSkpO1xuXG4gICAgLy8gQWxzbyBlbmZvcmNlIG9uIGluaXRpYWwgbGF5b3V0IHJlYWR5XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xuICAgICAgdGhpcy50YWJFbmZvcmNlci5lbmZvcmNlU2luZ2xlVGFiKCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RlciBzZXR0aW5ncyB0YWJcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IERpc2FibGVUYWJzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICB9XG5cbiAgdXBkYXRlTW9iaWxlVGFiSWNvbkNTUygpOiB2b2lkIHtcbiAgICAvLyBUb2dnbGUgQ1NTIGNsYXNzIG9uIGJvZHkgZWxlbWVudCBiYXNlZCBvbiBzZXR0aW5nXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlkZU1vYmlsZU5ld1RhYkljb24pIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImRpc2FibGUtdGFicy1oaWRlLW1vYmlsZS1pY29uXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlLXRhYnMtaGlkZS1tb2JpbGUtaWNvblwiKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxuXG4gIG9udW5sb2FkKCk6IHZvaWQge1xuICAgIC8vIENsZWFuIHVwIENTUyBjbGFzc1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImRpc2FibGUtdGFicy1oaWRlLW1vYmlsZS1pY29uXCIpO1xuICB9XG59XG4iLCAiZXhwb3J0IGludGVyZmFjZSBEaXNhYmxlVGFic1NldHRpbmdzIHtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbiAgaGlkZU1vYmlsZU5ld1RhYkljb246IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBEaXNhYmxlVGFic1NldHRpbmdzID0ge1xuICBlbmFibGVkOiB0cnVlLFxuICBoaWRlTW9iaWxlTmV3VGFiSWNvbjogZmFsc2UsXG59O1xuIiwgImltcG9ydCB7IEFwcCwgV29ya3NwYWNlTGVhZiB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgVGFiRW5mb3JjZXIge1xuICBwcml2YXRlIGFwcDogQXBwO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gIH1cblxuICBlbmZvcmNlU2luZ2xlVGFiKCk6IHZvaWQge1xuICAgIGNvbnN0IGxlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVSb290TGVhdmVzKGxlYWYgPT4ge1xuICAgICAgbGVhdmVzLnB1c2gobGVhZik7XG4gICAgfSk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBsZWFmICh0aGUgb25lIHRoYXQganVzdCBvcGVuZWQgb3IgaXMgY3VycmVudGx5IGFjdGl2ZSlcbiAgICAgIC8vIFByZWZlciB0aGUgbGFzdCBsZWFmIGFzIGl0J3MgbW9zdCBsaWtlbHkgdGhlIG5ld2x5IG9wZW5lZCBvbmVcbiAgICAgIGxldCBhY3RpdmU6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbGVhdmVzW2xlYXZlcy5sZW5ndGggLSAxXTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGl0J3MgYWN0dWFsbHkgYWN0aXZlIGJ5IGNoZWNraW5nIGZvciB0aGUgaXMtYWN0aXZlIGNsYXNzXG4gICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XG4gICAgICAgIGlmICh2aWV3ICYmICdjb250YWluZXJFbCcgaW4gdmlldykge1xuICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gKHZpZXcgYXMgeyBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgfSkuY29udGFpbmVyRWw7XG4gICAgICAgICAgaWYgKGNvbnRhaW5lckVsICYmIGNvbnRhaW5lckVsLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSkge1xuICAgICAgICAgICAgYWN0aXZlID0gbGVhZjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDbG9zZSBhbGwgb3RoZXIgdGFicyB0byByZXBsYWNlIHRoZSBjdXJyZW50IHRhYiBzbW9vdGhseVxuICAgICAgbGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICAgIGlmIChsZWFmICE9PSBhY3RpdmUpIHtcbiAgICAgICAgICBsZWFmLmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBEaXNhYmxlVGFic1BsdWdpbiBmcm9tIFwiLi4vbWFpblwiO1xuaW1wb3J0IHsgRGlzYWJsZVRhYnNTZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gXCIuLi91dGlscy9zZXR0aW5ncy1jb21wYXRcIjtcblxuZXhwb3J0IGNsYXNzIERpc2FibGVUYWJzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICBwbHVnaW46IERpc2FibGVUYWJzUGx1Z2luO1xuICBzZXR0aW5nczogRGlzYWJsZVRhYnNTZXR0aW5ncztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEaXNhYmxlVGFic1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnNldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzO1xuICB9XG5cbiAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIC8vIEZpcnN0IGdyb3VwIChubyBoZWFkaW5nKVxuICAgIGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwpO1xuICAgIGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG4gICAgICBzZXR0aW5nXG4gICAgICAgIC5zZXROYW1lKFwiSGlkZSBtb2JpbGUgdGFicyBpY29uXCIpXG4gICAgICAgIC5zZXREZXNjKFwiSGlkZSB0aGUgdGFicyBpY29uIG9uIG1vYmlsZSBkZXZpY2VzXCIpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVOZXdUYWJJY29uKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmhpZGVNb2JpbGVOZXdUYWJJY29uID0gdmFsdWU7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVNb2JpbGVUYWJJY29uQ1NTKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH0pO1xuICB9XG59XG5cbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgU2V0dGluZywgcmVxdWlyZUFwaVZlcnNpb24gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIE9ic2lkaWFuTW9kdWxlIGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCB3b3JrcyB3aXRoIGJvdGggU2V0dGluZ0dyb3VwIGFuZCBmYWxsYmFjayBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NDb250YWluZXIge1xyXG5cdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzZXR0aW5ncyBjb250YWluZXIgdGhhdCB1c2VzIFNldHRpbmdHcm91cCBpZiBhdmFpbGFibGUgKEFQSSAxLjExLjArKSxcclxuICogb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY3JlYXRpbmcgYSBoZWFkaW5nIGFuZCB1c2luZyB0aGUgY29udGFpbmVyIGRpcmVjdGx5LlxyXG4gKiBcclxuICogVXNlcyByZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykgdG8gY2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZS5cclxuICogVGhpcyBpcyB0aGUgb2ZmaWNpYWwgT2JzaWRpYW4gQVBJIG1ldGhvZCBmb3IgdmVyc2lvbiBjaGVja2luZy5cclxuICogXHJcbiAqIEBwYXJhbSBjb250YWluZXJFbCAtIFRoZSBjb250YWluZXIgZWxlbWVudCBmb3Igc2V0dGluZ3NcclxuICogQHBhcmFtIGhlYWRpbmcgLSBUaGUgaGVhZGluZyB0ZXh0IGZvciB0aGUgc2V0dGluZ3MgZ3JvdXAgKG9wdGlvbmFsKVxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBdUI7OztBQ0toQixJQUFNLG1CQUF3QztBQUFBLEVBQ25ELFNBQVM7QUFBQSxFQUNULHNCQUFzQjtBQUN4Qjs7O0FDTk8sSUFBTSxjQUFOLE1BQWtCO0FBQUEsRUFHdkIsWUFBWSxLQUFVO0FBQ3BCLFNBQUssTUFBTTtBQUFBLEVBQ2I7QUFBQSxFQUVBLG1CQUF5QjtBQUN2QixVQUFNLFNBQTBCLENBQUM7QUFDakMsU0FBSyxJQUFJLFVBQVUsa0JBQWtCLFVBQVE7QUFDM0MsYUFBTyxLQUFLLElBQUk7QUFBQSxJQUNsQixDQUFDO0FBRUQsUUFBSSxPQUFPLFNBQVMsR0FBRztBQUdyQixVQUFJLFNBQStCLE9BQU8sT0FBTyxTQUFTLENBQUM7QUFHM0QsaUJBQVcsUUFBUSxRQUFRO0FBQ3pCLGNBQU0sT0FBTyxLQUFLO0FBQ2xCLFlBQUksUUFBUSxpQkFBaUIsTUFBTTtBQUNqQyxnQkFBTSxjQUFlLEtBQXNDO0FBQzNELGNBQUksZUFBZSxZQUFZLFNBQVMsV0FBVyxHQUFHO0FBQ3BELHFCQUFTO0FBQ1Q7QUFBQSxVQUNGO0FBQUEsUUFDRjtBQUFBLE1BQ0Y7QUFHQSxhQUFPLFFBQVEsVUFBUTtBQUNyQixZQUFJLFNBQVMsUUFBUTtBQUNuQixlQUFLLE9BQU87QUFBQSxRQUNkO0FBQUEs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
